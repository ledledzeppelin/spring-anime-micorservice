<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.spring.anime.animation.mapper.AnimationMapper">

    <resultMap id="animationMap" type="org.spring.anime.animation.model.Animation">
        <id column="id" property="id"/>
        <result column="name" property="name"/>
        <result column="long_review_size" property="longReviewSize"/>
        <result column="short_review_size" property="shortReviewSize"/>
        <result column="state" property="state"/>
        <result column="years" property="years"/>
        <result column="quarter" property="quarter"/>
        <result column="rate" property="rate"/>
        <result column="views" property="views"/>
        <result column="introduction" property="introduction"/>
        <result column="image" property="image"/>
        <result column="comment_id" property="commentId" typeHandler="org.spring.anime.animation.JsonListTypeHandler"/>
        <result column="tags" property="tags" typeHandler="org.spring.anime.animation.JsonStringToListTypeHandler"/>

    </resultMap>

    <select id="getClassic" resultMap="animationMap">
        SELECT * FROM animations WHERE CAST(years AS UNSIGNED) &lt;2015 ORDER BY RAND() LIMIT 4
    </select>

    <select id="getNew" resultMap="animationMap">
        SELECT * FROM animations WHERE CAST(years AS UNSIGNED) >= 2015 ORDER BY RAND() LIMIT 8
    </select>

    <select id="getCur" resultMap="animationMap">
        SELECT * FROM animations WHERE state != '完结' ORDER BY RAND() LIMIT 4
    </select>

    <select id="getAnimeById" parameterType="java.lang.Integer" resultMap="animationMap">
        SELECT * FROM animations WHERE id = #{id}
    </select>

</mapper>

